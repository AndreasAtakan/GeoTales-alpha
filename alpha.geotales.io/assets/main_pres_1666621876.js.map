{"mappings":"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","sources":["pres/js/helpers.js","pres/js/scenes.js","pres/js/textboxes.js","pres/js/map/map.js","pres/js/main.js"],"sourcesContent":["/*******************************************************************************\n* Copyright (C) Nordfjord EDB AS - All Rights Reserved                         *\n*                                                                              *\n* Unauthorized copying of this file, via any medium is strictly prohibited     *\n* Proprietary and confidential                                                 *\n* Written by Andreas Atakan <aca@geotales.io>, January 2022                  *\n*******************************************************************************/\n\n\"use strict\";\n\n\nexport function uuid(a) {\n\treturn a ? (a^Math.random()*16>>a/4).toString(16) : ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, uuid);\n}\n\n\n\nexport function sanitize(str) {\n\tlet map = {\n\t\t\"\\&\": \"&amp;\",\n\t\t\"\\<\": \"&lt;\",\n\t\t\"\\>\": \"&gt;\",\n\t\t\"\\\"\": \"&quot;\",\n\t\t\"\\'\": \"&#x27;\",\n\t\t\"\\/\": \"&#x2F;\"\n\t};\n\tlet reg = /[&<>\"'/]/ig;\n\treturn str.replace(reg, match => (map[match]));\n}\n\n\n\nexport function import_data(data) {\n\t_OPTIONS = data.options;\n\n\tif(data.scenes.length <= 0) { return; }\n\n\tif(_SCENES.store.length <= 0) { document.dispatchEvent( new Event(\"_setup\") ); }\n\n\t_SCENES.importData(data.scenes);\n\t_TEXTBOXES.importData(data.textboxes);\n\t_MAP.importData(data.objects);\n\n\t_SCENES.current();\n}\n\n\n\nexport function get_basemap(url) {\n\tfor(let b of _BASEMAPS) {\n\t\tif(b.tiles._url == url) { return b; }\n\t}\n\treturn null;\n}\n\n\n\nexport function get_aspect_ratio_dimentions(w, h, r) {\n\tlet _w = r * h;\n\tif(_w <= w) {\n\t\treturn [_w, h];\n\t}else{\n\t\treturn [w, w / r];\n\t}\n}\n\n\n\n/*function is_internal_basemap(url) {\n\tif(url == \"https://api.mapbox.com/styles/v1/andreasatakan/ckwjt95pj0zn714lvg9q9p7da/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiYW5kcmVhc2F0YWthbiIsImEiOiJjazlndzM1cmUwMnl5M21tZjQ3dXpzeHJnIn0.oE5zp040ZzJj5QgCDznweg\") {\n\t\treturn `\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/bath.svg\" /> Bath house</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/bridge.svg\" /> Bridge</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/cemetery.svg\" /> Cemetery</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/circle.svg\" /> Settlement</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/circle_11.svg\" /> Settlement</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/circle_brown.svg\" /> Settlement</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/dam.svg\" /> Dam</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/diamond.svg\" /> Settlement</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/diamond_red.svg\" /> Settlement</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/lighthouse.svg\" /> Lighthouse</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/mine.svg\" /> Mine</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/mount.svg\" /> Mount</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/oasis.svg\" /> Oasis</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/pass.svg\" /> Pass</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/production.svg\" /> Production</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/rectangle.svg\" /> Settlement</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/settlement.svg\" /> Settlement</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/shipwreck.svg\" /> Shipwreck</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/spiral.svg\" /> Settlement</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/square.svg\" /> Settlement</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/star.svg\" /> Settlement</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/tumulus.svg\" /> Tumulus</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/villa.svg\" /> Villa</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/waterwheel.svg\" /> Waterwheel</p>\n\t\t\t<p style=\"margin-right: 1rem;\"><img style=\"width: 25px;\" src=\"https://raw.githubusercontent.com/klokantech/roman-empire/master/icons/windmill.svg\" /> Windmill</p>\n\t\t`;\n\t}\n\n\treturn null;\n}*/\n","/*******************************************************************************\n* Copyright (C) Nordfjord EDB AS - All Rights Reserved                         *\n*                                                                              *\n* Unauthorized copying of this file, via any medium is strictly prohibited     *\n* Proprietary and confidential                                                 *\n* Written by Andreas Atakan <aca@geotales.io>, January 2022                  *\n*******************************************************************************/\n\n\"use strict\";\n\nimport { uuid } from \"./helpers.js\";\n\n\nexport function Scenes() {\n\tthis.store = [];\n\tthis.active = \"\";\n\n\n\tthis.setup = function() {\n\t\t$(\"#sceneNav #prev\").click(ev => { _SCENES.prev(); });\n\t\t$(\"#sceneNav #next\").click(ev => { _SCENES.next(); });\n\n\t\tthis.bind();\n\t};\n\n\tthis.reset = function() {\n\t\t//\n\t};\n\n\tthis.get = function(id) {\n\t\tfor(let i = 0; i < this.store.length; i++) {\n\t\t\tlet s = Object.assign({}, this.store[i]);\n\t\t\tif(s.id == id) { s.index = i; return s; }\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.getPrevScene = function(id) {\n\t\tlet c = this.get(id);\n\t\tif(!c || c.index <= 0) { return; }\n\n\t\treturn Object.assign({}, this.store[c.index - 1]);\n\t};\n\n\tthis.getNextScene = function(id) {\n\t\tlet c = this.get(id);\n\t\tif(!c || c.index >= this.store.length-1) { return; }\n\n\t\treturn Object.assign({}, this.store[c.index + 1]);\n\t};\n\n\tthis.bind = function() {\n\t\t$(\"#bookmarks button#bookmark\").off(\"click\");\n\t\t$(\"#bookmarks button#bookmark\").click(ev => {\n\t\t\tthis.set( $(ev.target).data(\"id\") );\n\t\t});\n\t};\n\n\tthis.prev = function() {\n\t\tlet s = this.getPrevScene(this.active);\n\t\tif(!s) { return; }\n\t\tthis.set(s.id);\n\t\treturn s;\n\t};\n\n\tthis.current = function() {\n\t\tthis.set(this.active);\n\t};\n\n\tthis.next = function() {\n\t\tlet s = this.getNextScene(this.active);\n\t\tif(!s) { return; }\n\t\tthis.set(s.id);\n\t\treturn s;\n\t};\n\n\tthis.set = function(id) {\n\t\tlet s = this.get(id);\n\n\t\tthis.active = id;\n\n\t\t_TEXTBOXES.set(s.id);\n\t\t_MAP.set(s.id);\n\n\t\tthis.bind();\n\t};\n\n\tthis.setOrientation = function(pos) {\n\t\tswitch(pos) {\n\t\t\tcase \"left\":\n\t\t\t\t$(\"#sceneNav\").css({ left: \"15px\", right: \"auto\" });\n\t\t\t\tbreak;\n\n\t\t\tcase \"right\":\n\t\t\t\t$(\"#sceneNav\").css({ left: \"auto\", right: \"15px\" });\n\t\t\t\tbreak;\n\n\t\t\tdefault: break;\n\t\t}\n\t};\n\n\tthis.resize = function() {\n\t\t_MAP.setAspectRatio();\n\t\t_TEXTBOXES.resize();\n\t};\n\n\tthis.importData = function(data) {\n\t\tif(data.length <= 0) { return; }\n\n\t\tif(this.store.length <= 0 || !this.active) {\n\t\t\tthis.active = data[0].id;\n\t\t}\n\n\t\tfor(let i = 0; i < data.length; i++) {\n\t\t\tlet o = data[i];\n\t\t\tlet s = new Scene(o.id);\n\t\t\ts.bounds = o.bounds;\n\t\t\ts.wms = o.wms;\n\t\t\ts.basemap = o.basemap;\n\t\t\ts.bookmark = o.bookmark;\n\t\t\ts.title = o.title;\n\n\t\t\tif(s.bookmark) {\n\t\t\t\t$(\"#bookmarks ul\").append(`\n\t\t\t\t\t<li><button type=\"button\" class=\"dropdown-item\" id=\"bookmark\" data-id=\"${s.id}\">${s.title || `Scene ${i+1}`}</button></li>\n\t\t\t\t`);\n\t\t\t}\n\n\t\t\tthis.store.push(s);\n\t\t}\n\t};\n}\n\n\n\nfunction Scene(id) {\n\tthis.id = id || uuid();\n\n\tthis.bounds = null;\n\tthis.wms = null;\n\tthis.basemap = null;\n\n\tthis.bookmark = false;\n\tthis.title = \"\";\n}\n","/*******************************************************************************\n* Copyright (C) Nordfjord EDB AS - All Rights Reserved                         *\n*                                                                              *\n* Unauthorized copying of this file, via any medium is strictly prohibited     *\n* Proprietary and confidential                                                 *\n* Written by Andreas Atakan <aca@geotales.io>, January 2022                  *\n*******************************************************************************/\n\n\"use strict\";\n\nimport { uuid } from \"./helpers.js\";\n\n\nexport function Textboxes() {\n\tthis.store = [];\n\n\n\tthis.setup = function() {\n\t\t//\n\t};\n\n\tthis.reset = function() {\n\t\t//\n\t};\n\n\tthis.get = function(sceneId) {\n\t\tfor(let i = 0; i < this.store.length; i++) {\n\t\t\tlet t = Object.assign({}, this.store[i]);\n\t\t\tif(t.sceneId == sceneId) { t.index = i; return t; }\n\t\t}\n\t\treturn null;\n\t};\n\n\tthis.delete = function(sceneId) {\n\t\tlet t = this.get(sceneId);\n\t\tt.disable();\n\t\tthis.store.splice(t.index, 1);\n\t};\n\n\tthis.bind = function() {\n\t\t$(\"#textbox #content img\").off(\"click\");\n\t\t$(\"#textbox #content img\").click(ev => { ev.stopPropagation();\n\t\t\t$(\"#imageModal img#imgPreview\").attr(\"src\", ev.target.src);\n\t\t\t$(\"#imageModal\").modal(\"show\");\n\t\t});\n\t};\n\n\tthis.set = function(sceneId) {\n\t\tfor(let t of this.store) {\n\t\t\tif(t.sceneId == sceneId) { t.enable(); break; }\n\t\t\telse{ t.disable(); }\n\t\t}\n\t\tsetTimeout(() => { this.bind(); }, 150);\n\t};\n\n\tthis.setOrientation = function(pos) {\n\t\tswitch(pos) {\n\t\t\tcase \"left\":\n\t\t\t\t$(\"#textbox\").css({ left: \"15px\", right: \"auto\" });\n\t\t\t\t_SCENES.setOrientation(\"left\");\n\t\t\t\t_MAP.setOrientation(\"right\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"right\":\n\t\t\t\t$(\"#textbox\").css({ left: \"auto\", right: \"15px\" });\n\t\t\t\t_SCENES.setOrientation(\"right\");\n\t\t\t\t_MAP.setOrientation(\"left\");\n\t\t\t\tbreak;\n\n\t\t\tdefault: break;\n\t\t}\n\t};\n\n\tthis.resize = function() {\n\t\tlet ww = $(window).width(),\n\t\t\twh = $(window).height(),\n\t\t\tmh = $(\"#map\").height(),\n\t\t\tth = $(\"#textbox #content\")[0].scrollHeight, top;\n\t\tlet isSmall = ww <= 575.98 && wh > 450;\n\n\t\tif(mh >= wh && isSmall) { top = wh * 0.7; }\n\t\telse if(isSmall) { top = mh + 10; }\n\t\telse { top = 10; }\n\t\t$(\"#textbox\").css(\"top\", `${top}px`);\n\n\t\t$(\"#textbox\").removeClass(\"noBottom\");\n\t\tif(th <= wh - 58\n\t\t&& !(mh >= wh && isSmall)) { $(\"#textbox\").addClass(\"noBottom\"); }\n\t};\n\n\tthis.importData = function(data) {\n\t\tif(data.length <= 0) { return; }\n\n\t\tfor(let o of data) {\n\t\t\tlet t = new Textbox(o.id);\n\t\t\tt.sceneId = o.sceneId;\n\t\t\tt.locked = o.locked;\n\t\t\tt.pos = o.pos; t.dim = o.dim;\n\t\t\tt.content = o.content;\n\n\t\t\tt.disable();\n\n\t\t\tthis.store.push(t);\n\t\t}\n\t};\n}\n\n\n\nfunction Textbox(id) {\n\tthis.id = id || uuid();\n\n\tthis.sceneId = \"\";\n\tthis.locked = false;\n\n\tthis.pos = \"left\";\n\tthis.dim = [0, 0.25];\n\tthis.content = \"\";\n\n\n\tthis.enable = function() {\n\t\tif(this.content == \"\") { return; }\n\n\t\t_TEXTBOXES.setOrientation(this.pos);\n\n\t\t$(\"#textbox #content\").html(this.content);\n\t\t$(\"#textbox\").css(\"opacity\", 0.8);\n\n\t\tif(this.dim) {\n\t\t\t$(\"#textbox\").css(\"max-width\", `${this.dim[1] * 100}%`);\n\t\t}\n\n\t\t// NOTE: this is to counteract the textbox being streched to the bottom of the screen if the textbox is smaller than the height of the screen\n\t\t_TEXTBOXES.resize();\n\t};\n\n\tthis.disable = function() {\n\t\t$(\"#textbox\").css(\"opacity\", 0);\n\t};\n}\n","/*******************************************************************************\n* Copyright (C) Nordfjord EDB AS - All Rights Reserved                         *\n*                                                                              *\n* Unauthorized copying of this file, via any medium is strictly prohibited     *\n* Proprietary and confidential                                                 *\n* Written by Andreas Atakan <aca@geotales.io>, January 2022                  *\n*******************************************************************************/\n\n\"use strict\";\n\nimport { get_aspect_ratio_dimentions } from \"../helpers.js\";\nimport \"./layers.js\";\n\n\nL.Map.addInitHook(function() {\n\n\t// Init map aspect ratio\n\n\tthis.setAspectRatio();\n\n\n\n\t// Plugins\n\n\t/*this.addControl( new L.Control.Fullscreen({ position: \"topright\" }) );*/\n\n\t/*this.addControl( L.control.zoom({ position: \"bottomright\" }) );*/\n\n\t/*this.addControl( L.control.locate({ position: \"topright\" }) );*/\n\n\tthis.fullscreenControl = L.easyButton({\n\t\tid: \"fullscreen\",\n\t\tposition: \"bottomcenter\",\n\t\tstates: [\n\t\t\t{\n\t\t\t\tstateName: \"enter\", title: \"Enter fullscreen\", icon: \"fa-expand\",\n\t\t\t\tonClick: (button, map) => {\n\t\t\t\t\tif(_IS_MOBILE) { window.parent.postMessage(\"fullscreenEnter\", \"*\"); }\n\t\t\t\t\telse{\n\t\t\t\t\t\tlet el = document.body;\n\t\t\t\t\t\tif(el.requestFullscreen) { el.requestFullscreen(); }\n\t\t\t\t\t\telse if(el.webkitRequestFullscreen) { el.webkitRequestFullscreen(); } /* Safari */\n\t\t\t\t\t\telse if(el.msRequestFullscreen) { el.msRequestFullscreen(); } /* IE11 */\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.isFullscreen = true;\n\t\t\t\t\tthis.setAspectRatio();\n\t\t\t\t\tbutton.state(\"exit\");\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tstateName: \"exit\", title: \"Exit fullscreen\", icon: \"fa-compress\",\n\t\t\t\tonClick: (button, map) => {\n\t\t\t\t\tif(_IS_MOBILE) { window.parent.postMessage(\"fullscreenExit\", \"*\"); }\n\t\t\t\t\telse{\n\t\t\t\t\t\tif(document.exitFullscreen) { document.exitFullscreen(); }\n\t\t\t\t\t\telse if(document.webkitExitFullscreen) { document.webkitExitFullscreen(); } /* Safari */\n\t\t\t\t\t\telse if(document.msExitFullscreen) { document.msExitFullscreen(); } /* IE11 */\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.isFullscreen = false;\n\t\t\t\t\tthis.setAspectRatio();\n\t\t\t\t\tbutton.state(\"enter\");\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t});\n\tthis.addControl(this.fullscreenControl);\n\n\tthis.zoomControl = L.easyBar([\n\t\tL.easyButton({\n\t\t\tid: \"zoomIn\",\n\t\t\tstates: [\n\t\t\t\t{\n\t\t\t\t\tstateName: \"main\", title: \"Zoom in\", icon: \"fa-plus\",\n\t\t\t\t\tonClick: (button, map) => { this.zoomIn(); }\n\t\t\t\t}\n\t\t\t]\n\t\t}),\n\t\tL.easyButton({\n\t\t\tid: \"mapLock\",\n\t\t\tstates: [\n\t\t\t\t{\n\t\t\t\t\tstateName: \"locked\", title: \"Unlock map\", icon: \"fa-lock\",\n\t\t\t\t\tonClick: (button, map) => {\n\t\t\t\t\t\tthis.isLocked = false; this.enable();\n\t\t\t\t\t\tbutton.state(\"unlocked\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tstateName: \"unlocked\", title: \"Lock map\", icon: \"fa-lock-open\",\n\t\t\t\t\tonClick: (button, map) => {\n\t\t\t\t\t\tthis.isLocked = true; this.disable();\n\t\t\t\t\t\tthis.fitBounds( _SCENES.get( _SCENES.active ).bounds, { maxZoom: this.getMaxZoom(), noMoveStart: true } );\n\t\t\t\t\t\tbutton.state(\"locked\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]\n\t\t}),\n\t\tL.easyButton({\n\t\t\tid: \"zoomOut\",\n\t\t\tstates: [\n\t\t\t\t{\n\t\t\t\t\tstateName: \"main\", title: \"Zoom out\", icon: \"fa-minus\",\n\t\t\t\t\tonClick: (button, map) => { this.zoomOut(); }\n\t\t\t\t}\n\t\t\t]\n\t\t})\n\t], { position: \"bottomright\" });\n\tthis.addControl(this.zoomControl);\n\n\tthis.isFullscreen = false;\n\tthis.isLocked = true;\n\n\n\n\n\n\t// Basemap\n\n\tthis.basemap = _BASEMAPS[10].tiles;\n\tthis.addLayer( this.basemap );\n\n\t// WMS\n\n\tthis.wms = {};\n\n\n\n\n\n\t// Object layers\n\n\tthis.objects = [];\n\tthis.objectLayer = L.featureGroup();\n\tthis.addLayer( this.objectLayer );\n\n\tthis.objectLayer.on(\"layeradd\", ev => {\n\t\tlet o = ev.layer;\n\n\t\tlet label = o.options.label;\n\t\tif(label) {\n\t\t\to.bindTooltip(label, { direction: \"center\", permanent: true });\n\t\t\tif(o instanceof L.ImageOverlay) { this.updateTooltip(o); }\n\t\t}\n\n\t\to.on(\"moveend\", ev => { this.updateTooltip(ev.target); });\n\n\t\tif(o instanceof L.ImageOverlay) { this.setIcon(o); }\n\t});\n\n\tthis.objectLayer.on(\"layerremove\", ev => {\n\t\tlet o = ev.layer;\n\n\t\to.closeTooltip(); o.unbindTooltip();\n\t\to.slideCancel();\n\t});\n\n\tthis.on(\"zoomend\", ev => {\n\t\tfor(let o of this.getLayers()) { this.updateTooltip(o); }\n\t});\n\tthis.on(\"zoom\", ev => { if(this._renderer) { this._renderer._reset(); } });\n\n\n\n\n\n\t// Map events\n\t//this.on(\"moveend\", ev => {});\n\n});\n\n\n\n\nL.Map.include({\n\n\tsetup: function() {\n\t\t$(\".leaflet-control-attribution a\").prop(\"target\", \"_blank\");\n\n\t\t$(\"#mapNav #zoomIn\").click(ev => { this.zoomIn(); });\n\t\t$(\"#mapNav #zoomOut\").click(ev => { this.zoomOut(); });\n\n\t\tthis.disable();\n\t},\n\treset: function() {\n\t\tthis.clearLayers();\n\t},\n\n\tenable: function() {\n\t\tthis.dragging.enable();\n\t\tthis.scrollWheelZoom.enable();\n\t\tthis.touchZoom.enable();\n\t\tif(this.tapHold) { this.tapHold.enable(); }\n\n\t\t//this.doubleClickZoom.disable();\n\n\t\tthis.zoomControl._buttons[0].enable();\n\t\tthis.zoomControl._buttons[2].enable();\n\t},\n\tdisable: function() {\n\t\tthis.dragging.disable();\n\t\tthis.scrollWheelZoom.disable();\n\t\tthis.touchZoom.disable();\n\t\tif(this.tapHold) { this.tapHold.disable(); }\n\n\t\tthis.doubleClickZoom.disable();\n\n\t\tthis.zoomControl._buttons[0].disable();\n\t\tthis.zoomControl._buttons[2].disable();\n\t},\n\n\tsetOrientation: function(pos) {\n\t\tswitch(pos) {\n\t\t\tcase \"left\":\n\t\t\t\tthis.zoomControl.setPosition(\"bottomleft\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"right\":\n\t\t\t\tthis.zoomControl.setPosition(\"bottomright\");\n\t\t\t\tbreak;\n\n\t\t\tdefault: break;\n\t\t}\n\t},\n\n\tsetAspectRatio: function() {\n\t\tlet w = $(\"#main\").outerWidth(),\n\t\t\th = $(\"#main\").outerHeight(),\n\t\t\tr = _OPTIONS.aspectratio;\n\t\tlet dim = get_aspect_ratio_dimentions(w, h, r);\n\n\t\tlet width = (dim[0] / w) * 100,\n\t\t\theight = (dim[1] / h) * 100,\n\t\t\tleft = (((w - dim[0]) / 2) / w) * 100,\n\t\t\ttop = (((h - dim[1]) / 2)/ h) * 100;\n\n\t\tif(this.isFullscreen) {\n\t\t\twidth = 100; height = 100;\n\t\t\tleft = 0; top = 0;\n\t\t}\n\n\t\t$(\"#map\").css({\n\t\t\twidth: `${width}%`,\n\t\t\theight: `${height}%`,\n\t\t\tleft: `${left}%`,\n\t\t\ttop: `${top}%`\n\t\t});\n\n\t\tthis.invalidateSize();\n\t\tif(_SCENES.active) { this.setFlyTo( _SCENES.get( _SCENES.active ).bounds ); }\n\n\t\tlet mh = $(\"#map\").height(), isSmall = w <= 575.98 && h > 450;\n\t\tif(mh >= h && isSmall) { $(\".leaflet-bottom.leaflet-center .leaflet-bar\").addClass(\"marginBottom\"); }\n\t\telse { $(\".leaflet-bottom.leaflet-center .leaflet-bar\").removeClass(\"marginBottom\"); }\n\t},\n\n\tsetFlyTo: function(bounds) {\n\t\tif(this.isLocked) {\n\t\t\tthis.flyToBounds(bounds, { maxZoom: this.getMaxZoom(), noMoveStart: true, duration: _OPTIONS.panningspeed || null });\n\t\t}\n\t},\n\n\n\n\tclearLayers: function() {\n\t\tthis.objectLayer.clearLayers();\n\t},\n\n\tgetLayers: function() {\n\t\treturn this.objectLayer.getLayers();\n\t},\n\n\tsetObjects: function(sceneId) {\n\t\tlet os = this.getLayers().map(o => {\n\t\t\tlet r = this.extractObject(o); return { id: r.id, pos: r.pos, radius: r.radius, animationspeed: r.animationspeed };\n\t\t});\n\t\tthis.clearLayers();\n\t\tfor(let i = 0; i < this.objects.length; i++) {\n\t\t\tlet o = Object.assign({}, this.objects[i]);\n\t\t\tif(o.sceneId == sceneId) {\n\t\t\t\tlet pos = o.pos, rad = o.radius;\n\t\t\t\tfor(let oo of os) {\n\t\t\t\t\tif(o.id == oo.id) {\n\t\t\t\t\t\to.pos = oo.pos;\n\t\t\t\t\t\tif(o.type == \"circle\") { o.radius = oo.radius; }\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet object = this.createObject(o);\n\t\t\t\tthis.objectLayer.addLayer(object);\n\n\t\t\t\tfor(let oo of os) {\n\t\t\t\t\tif(o.id == oo.id) {\n\t\t\t\t\t\tobject.slideTo( pos , { radius: rad, duration: oo.animationspeed || _OPTIONS.animationspeed });\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tset: function(sceneId) {\n\t\tlet s = _SCENES.get(sceneId);\n\t\tthis.setBasemap(s.basemap);\n\t\tthis.setWMS(s.wms);\n\t\tthis.setObjects(sceneId);\n\t\tthis.setFlyTo(s.bounds);\n\t},\n\n\tsetIcon: function(o, size, icon) {\n\t\tif(!(o instanceof L.ImageOverlay)) { return; }\n\n\t\tif(size) {\n\t\t\tlet zoom = this.getZoom();\n\t\t\tlet c = this.project(o.getBounds().getCenter(), zoom);\n\t\t\to.setBounds([\n\t\t\t\tthis.unproject([ c.x - size[0] / 2, c.y - size[1] / 2 ], zoom),\n\t\t\t\tthis.unproject([ c.x + size[0] / 2, c.y + size[1] / 2 ], zoom)\n\t\t\t]);\n\t\t}\n\t\tif(icon) { o.setUrl(icon); }\n\n\t\t$(o._image).css(\"border-radius\", o.options.rounded ? \"50%\" : \"0\");\n\t\t//$(o._image).css(\"transform\", `rotate(${o.options.angle}deg)`);\n\t\t$(o._image).css(\"border\", `${o.options.borderThickness}px solid ${o.options.borderColor}`);\n\t\t$(o._image).css(\"filter\", `\n\t\t\tblur(${o.options.overlayBlur}px)\n\t\t\tgrayscale(${o.options.overlayGrayscale*100}%)\n\t\t\tdrop-shadow(0 0 ${o.options.overlayBrightness}px yellow)\n\t\t\topacity(${(1 - o.options.overlayTransparency)*100}%)\n\t\t`);\n\n\t\tif(o.options.label) { this.updateTooltip(o); }\n\t},\n\n\tupdateTooltip: function(o) {\n\t\tif(o.getTooltip()) {\n\t\t\to.closeTooltip();\n\t\t\tif(o instanceof L.ImageOverlay) {\n\t\t\t\tlet d = this.latLngToContainerPoint( o.getBounds().getNorthWest() ).distanceTo( this.latLngToContainerPoint( o.getBounds().getSouthWest() ) );\n\t\t\t\to.getTooltip().options.offset = [0, d / 2 - 10];\n\t\t\t}\n\t\t\to.openTooltip();\n\t\t}\n\t},\n\n\n\n\tgetWMS: function() {\n\t\treturn this.wms ? {\n\t\t\ttype: \"wms\",\n\t\t\turl: this.wms._url,\n\t\t\tlayers: this.wms.options.layers,\n\t\t\tformat: this.wms.options.format,\n\t\t\tversion: this.wms.options.version,\n\t\t\ttransparent: this.wms.options.transparent\n\t\t} : null;\n\t},\n\n\tsetWMS: function(source) {\n\t\tif(!source) {\n\t\t\tthis.wms = this.wms ? this.removeLayer( this.wms ) : null;\n\t\t\treturn;\n\t\t}\n\t\tif(this.wms\n\t\t&& (source.url || source._url) == this.wms._url\n\t\t&& (source.layers || source.options.layers) == this.wms.options.layers\n\t\t&& (source.format || source.options.format) == this.wms.options.format\n\t\t&& (source.version || source.options.version) == this.wms.options.version) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet layer;\n\n\t\tif(source instanceof L.TileLayer.WMS) {\n\t\t\tlayer = source;\n\t\t}else\n\t\tif(source.type == \"wms\") {\n\t\t\tlayer = L.tileLayer.wms(source.url, {\n\t\t\t\tlayers: source.layers,\n\t\t\t\tformat: source.format,\n\t\t\t\ttransparent: source.transparent,\n\t\t\t\tversion: source.version,\n\t\t\t\tminZoom: source.minZoom || 0,\n\t\t\t\tmaxZoom: source.maxZoom || 22,\n\t\t\t\tattribution: source.attribution || \"\"\n\t\t\t});\n\t\t}\n\t\telse{ return; }\n\n\t\tif(this.wms) { this.removeLayer( this.wms ); }\n\n\t\tthis.wms = layer;\n\n\t\tthis.addLayer( this.wms );\n\t\tthis.wms.bringToFront();\n\t},\n\n\tgetBasemap: function() {\n\t\tif(this.basemap instanceof L.TileLayer) {\n\t\t\treturn {\n\t\t\t\ttype: \"tiles\",\n\t\t\t\turl: this.basemap._url,\n\t\t\t\tminZoom: this.basemap.options.minZoom,\n\t\t\t\tmaxZoom: this.basemap.options.maxZoom,\n\t\t\t\tattribution: this.basemap.options.attribution\n\t\t\t};\n\t\t}else\n\t\tif(this.basemap instanceof L.ImageOverlay) {\n\t\t\treturn {\n\t\t\t\ttype: \"image\",\n\t\t\t\timg: this.basemap._url\n\t\t\t};\n\t\t}\n\t\treturn null;\n\t},\n\n\tsetBasemap: async function(source) {\n\t\tlet basemap;\n\n\t\tif(source instanceof L.TileLayer) {\n\t\t\tif(this.basemap instanceof L.TileLayer\n\t\t\t&& source._url == this.basemap._url) { return; }\n\n\t\t\tbasemap = source;\n\t\t}else\n\t\tif(source.type == \"tiles\") {\n\t\t\tif(this.basemap instanceof L.TileLayer\n\t\t\t&& source.url == this.basemap._url) { return; }\n\n\t\t\tbasemap = L.tileLayer(source.url, {\n\t\t\t\tminZoom: source.minZoom || 0,\n\t\t\t\tmaxZoom: source.maxZoom || 22,\n\t\t\t\tattribution: source.attribution || `&copy; <a href=\"https://${_HOST}\" target=\"_blank\">GeoTales</a>`\n\t\t\t});\n\t\t}else\n\t\tif(source.type == \"image\") {\n\t\t\tif(this.basemap instanceof L.ImageOverlay\n\t\t\t&& source.img == this.basemap._url) { return; }\n\n\t\t\tlet img = new Image();\n\t\t\timg.src = source.img;\n\t\t\tawait img.decode();\n\n\t\t\tlet r = img.width / img.height;\n\t\t\tlet b = _SCENES.get( _SCENES.active ).bounds;\n\t\t\tlet bounds = [b[0], []];\n\t\t\tlet tlp = this.latLngToContainerPoint(b[0]),\n\t\t\t\tbrp = this.latLngToContainerPoint(b[1]);\n\t\t\tlet h = brp.y - tlp.y,\n\t\t\t\tw = brp.x - tlp.x;\n\n\t\t\tif(r >= 1) { // width >= height\n\t\t\t\tlet p = this.containerPointToLatLng([brp.x, tlp.y + w / r]);\n\t\t\t\tbounds[1][0] = p.lat;\n\t\t\t\tbounds[1][1] = p.lng;\n\t\t\t}else{ // height > width\n\t\t\t\tlet p = this.containerPointToLatLng([tlp.x + r * h, brp.y]);\n\t\t\t\tbounds[1][0] = p.lat;\n\t\t\t\tbounds[1][1] = p.lng;\n\t\t\t}\n\n\t\t\tbasemap = L.imageOverlay(source.img, bounds, {\n\t\t\t\tzIndex: 0,\n\t\t\t\tminZoom: 0, maxZoom: 1000,\n\t\t\t\tattribution: `&copy; <a href=\"https://${_HOST}\" target=\"_blank\">GeoTales</a>`\n\t\t\t});\n\t\t}\n\t\telse{ return; }\n\n\t\tthis.removeLayer( this.basemap );\n\n\t\tthis.basemap = basemap;\n\n\t\tthis.presetZoom(this.basemap.options.minZoom, this.basemap.options.maxZoom);\n\n\t\tthis.addLayer( this.basemap );\n\t\tthis.basemap.bringToBack();\n\n\t\t$(\"div.leaflet-control-attribution a\").prop(\"target\", \"_blank\");\n\t},\n\n\tresetBasemap: function() { this.setBasemap( _BASEMAPS[10].tiles ); },\n\n\tpresetZoom: function(min, max) {\n\t\tlet zoom = this.getZoom();\n\t\tif(zoom < min || zoom > max) {\n\t\t\tif(zoom < min) { this.setZoom(min); }\n\t\t\tif(zoom > max) { this.setZoom(max); }\n\t\t}\n\t\tthis.setMinZoom(min);\n\t\tthis.setMaxZoom(max);\n\t},\n\n\n\n\tcreateObject: function(o) {\n\t\tlet oo = null;\n\n\t\tswitch(o.type) {\n\t\t\tcase \"avatar\":\n\t\t\t\too = L.imageOverlay(o.icon, o.pos, {\n\t\t\t\t\tinteractive:\t\t\tfalse,\n\t\t\t\t\tzIndex:\t\t\t\t\t200,\n\t\t\t\t\tlabel:\t\t\t\t\to.label,\n\t\t\t\t\tratio:\t\t\t\t\to.ratio,\n\t\t\t\t\trounded:\t\t\t\to.rounded,\n\t\t\t\t\tangle:\t\t\t\t\to.angle,\n\t\t\t\t\tborderColor:\t\t\to.borderColor,\n\t\t\t\t\tborderThickness:\t\to.borderThickness,\n\t\t\t\t\toverlayBlur:\t\t\to.blur,\n\t\t\t\t\toverlayBrightness:\t\to.brightness,\n\t\t\t\t\toverlayGrayscale:\t\to.grayscale,\n\t\t\t\t\toverlayTransparency:\to.transparency\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"polyline\":\n\t\t\t\too = L.polyline(o.pos, {\n\t\t\t\t\tinteractive:\tfalse,\n\t\t\t\t\tlabel:\t\t\to.label,\n\t\t\t\t\tdashArray:\t\to.dashed ? \"5, 10\" : \"\",\n\t\t\t\t\tcolor:\t\t\to.color,\n\t\t\t\t\tweight:\t\t\to.thickness,\n\t\t\t\t\topacity:\t\t1 - o.transparency\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"polygon\":\n\t\t\t\too = L.polygon(o.pos, {\n\t\t\t\t\tinteractive:\tfalse,\n\t\t\t\t\tlabel:\t\t\to.label,\n\t\t\t\t\tdashArray:\t\to.dashed ? \"5, 10\" : \"\",\n\t\t\t\t\tcolor:\t\t\to.lineColor,\n\t\t\t\t\tweight:\t\t\to.lineThickness,\n\t\t\t\t\topacity:\t\t1 - o.lineTransparency,\n\t\t\t\t\tfillColor:\t\to.fillColor,\n\t\t\t\t\tfillOpacity:\t1 - o.fillTransparency\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"rectangle\":\n\t\t\t\too = L.rectangle(o.pos, {\n\t\t\t\t\tinteractive:\tfalse,\n\t\t\t\t\tlabel:\t\t\to.label,\n\t\t\t\t\tdashArray:\t\to.dashed ? \"5, 10\" : \"\",\n\t\t\t\t\tcolor:\t\t\to.lineColor,\n\t\t\t\t\tweight:\t\t\to.lineThickness,\n\t\t\t\t\topacity:\t\t1 - o.lineTransparency,\n\t\t\t\t\tfillColor:\t\to.fillColor,\n\t\t\t\t\tfillOpacity:\t1 - o.fillTransparency\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase \"circle\":\n\t\t\t\too = L.circle(o.pos, {\n\t\t\t\t\tinteractive:\tfalse,\n\t\t\t\t\tradius:\t\t\to.radius,\n\t\t\t\t\tlabel:\t\t\to.label,\n\t\t\t\t\tdashArray:\t\to.dashed ? \"5, 10\" : \"\",\n\t\t\t\t\tcolor:\t\t\to.lineColor,\n\t\t\t\t\tweight:\t\t\to.lineThickness,\n\t\t\t\t\topacity:\t\t1 - o.lineTransparency,\n\t\t\t\t\tfillColor:\t\to.fillColor,\n\t\t\t\t\tfillOpacity:\t1 - o.fillTransparency\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error(\"object type invalid\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\too.options.id = o.id;\n\t\too.options.sceneId = o.sceneId;\n\n\t\treturn oo;\n\t},\n\n\textractObject: function(o) {\n\t\tlet oo = null;\n\n\t\tif(o instanceof L.ImageOverlay) {\n\t\t\tlet nw = o.getBounds().getNorthWest(), se = o.getBounds().getSouthEast();\n\t\t\too = {\n\t\t\t\tid:\t\t\t\t\to.options.id,\n\t\t\t\tsceneId:\t\t\to.options.sceneId,\n\t\t\t\ttype:\t\t\t\t\"avatar\",\n\t\t\t\tpos:\t\t\t\t[[nw.lat, nw.lng], [se.lat, se.lng]],\n\t\t\t\tlabel:\t\t\t\to.options.label,\n\t\t\t\ticon:\t\t\t\to._url,\n\t\t\t\tratio:\t\t\t\to.options.ratio,\n\t\t\t\trounded:\t\t\to.options.rounded,\n\t\t\t\tangle:\t\t\t\t0,\n\t\t\t\tborderColor:\t\to.options.borderColor,\n\t\t\t\tborderThickness:\to.options.borderThickness,\n\t\t\t\tblur:\t\t\t\to.options.overlayBlur,\n\t\t\t\tgrayscale:\t\t\to.options.overlayGrayscale,\n\t\t\t\tbrightness:\t\t\to.options.overlayBrightness,\n\t\t\t\ttransparency:\t\to.options.overlayTransparency,\n\t\t\t\tanimationspeed:\t\to.options.animationspeed\n\t\t\t};\n\t\t}else\n\t\tif(o instanceof L.Polygon) {\n\t\t\too = {\n\t\t\t\tid:\t\t\t\t\to.options.id,\n\t\t\t\tsceneId:\t\t\to.options.sceneId,\n\t\t\t\ttype:\t\t\t\to instanceof L.Rectangle ? \"rectangle\" : \"polygon\",\n\t\t\t\tpos:\t\t\t\to.getLatLngs(),\n\t\t\t\tlabel:\t\t\t\to.options.label,\n\t\t\t\tdashed:\t\t\t\t!!o.options.dashArray,\n\t\t\t\tlineColor:\t\t\to.options.color,\n\t\t\t\tlineThickness:\t\to.options.weight,\n\t\t\t\tlineTransparency:\t1 - o.options.opacity,\n\t\t\t\tfillColor:\t\t\to.options.fillColor,\n\t\t\t\tfillTransparency:\t1 - o.options.fillOpacity,\n\t\t\t\tanimationspeed:\t\to.options.animationspeed\n\t\t\t};\n\t\t}else\n\t\tif(o instanceof L.Polyline) {\n\t\t\too = {\n\t\t\t\tid:\t\t\t\to.options.id,\n\t\t\t\tsceneId:\t\to.options.sceneId,\n\t\t\t\ttype:\t\t\t\"polyline\",\n\t\t\t\tpos:\t\t\to.getLatLngs(),\n\t\t\t\tlabel:\t\t\to.options.label,\n\t\t\t\tdashed:\t\t\t!!o.options.dashArray,\n\t\t\t\tcolor:\t\t\to.options.color,\n\t\t\t\tthickness:\t\to.options.weight,\n\t\t\t\ttransparency:\t1 - o.options.opacity,\n\t\t\t\tanimationspeed:\to.options.animationspeed\n\t\t\t};\n\t\t}else\n\t\tif(o instanceof L.Circle) {\n\t\t\tlet p = o.getLatLng();\n\t\t\too = {\n\t\t\t\tid:\t\t\t\t\to.options.id,\n\t\t\t\tsceneId:\t\t\to.options.sceneId,\n\t\t\t\ttype:\t\t\t\t\"circle\",\n\t\t\t\tpos:\t\t\t\t[ p.lat, p.lng ],\n\t\t\t\tradius:\t\t\t\to.getRadius(),\n\t\t\t\tlabel:\t\t\t\to.options.label,\n\t\t\t\tdashed:\t\t\t\t!!o.options.dashArray,\n\t\t\t\tlineColor:\t\t\to.options.color,\n\t\t\t\tlineThickness:\t\to.options.weight,\n\t\t\t\tlineTransparency:\t1 - o.options.opacity,\n\t\t\t\tfillColor:\t\t\to.options.fillColor,\n\t\t\t\tfillTransparency:\t1 - o.options.fillOpacity,\n\t\t\t\tanimationspeed:\t\to.options.animationspeed\n\t\t\t};\n\t\t}else{ console.error(\"object type invalid\"); }\n\n\t\treturn oo;\n\t},\n\n\timportData: function(data) {\n\t\tfor(let i = 0; i < data.length; i++) {\n\t\t\tthis.objects.push( data[i] );\n\t\t}\n\t}\n\n});\n","/*******************************************************************************\n* Copyright (C) Nordfjord EDB AS - All Rights Reserved                         *\n*                                                                              *\n* Unauthorized copying of this file, via any medium is strictly prohibited     *\n* Proprietary and confidential                                                 *\n* Written by Andreas Atakan <aca@geotales.io>, January 2022                  *\n*******************************************************************************/\n\n\"use strict\";\n\nimport { import_data } from \"./helpers.js\";\n//import { init, reset } from \"./generate.js\";\n\nimport { Scenes } from \"./scenes.js\";\nimport { Textboxes } from \"./textboxes.js\";\n\nimport \"./map/map.js\";\n\n\nwindow.onload = function(ev) {\n\n\t// Disable mobile pinch-zoom\n\tdocument.addEventListener(\"touchmove\", function(ev) {\n\t\tif(ev.scale !== 1) { ev.preventDefault(); }\n\t}, false);\n\n\t// Set up window resize start/end events\n\tlet resizeTimer = false;\n\t$(window).on(\"resize\", function(ev) {\n\t\tif( !resizeTimer ) { $(window).trigger(\"resizestart\"); }\n\t\tclearTimeout(resizeTimer);\n\t\tresizeTimer = setTimeout(function() {\n\t\t\tresizeTimer = false;\n\t\t\t$(window).trigger(\"resizeend\");\n\t\t}, 250);\n\t}).on(\"resizeend\", function() { _SCENES.resize(); });\n\n\t// Set up nav-btn-fade-out\n\tlet btnTimer = null,\n\t\tbtnToggle = v => {\n\t\t\t$(\".leaflet-control.leaflet-bar, #sceneNav\").css(\"opacity\", v || 0);\n\t\t\t$(\"#textbox\").css(\"bottom\", `${v ? \"58\" : \"10\"}px`);\n\t\t};\n\t$(window).on(\"mousemove touchmove\", function() {\n\t\tbtnToggle(0.8); clearTimeout(btnTimer);\n\t\tbtnTimer = setTimeout(btnToggle, 5000);\n\t});\n\tsetTimeout(btnToggle, 5000);\n\n\n\n\t_SCENES = new Scenes();\n\n\t$(document).keydown(ev => { if([\"ArrowUp\", \"ArrowDown\", \"ArrowRight\", \"ArrowLeft\", \"Space\"].indexOf(ev.code) > -1) { ev.preventDefault(); } });\n\t$(document).keyup(ev => {\n\t\tlet keycode = ev.code;\n\n\t\tif([\"ArrowUp\",\"ArrowLeft\"].indexOf(keycode) > -1) { ev.preventDefault(); _SCENES.prev(); }\n\t\tif([\"ArrowDown\", \"ArrowRight\", \"Space\"].indexOf(keycode) > -1) { ev.preventDefault(); _SCENES.next(); }\n\t\tif([\"ArrowUp\", \"ArrowDown\", \"ArrowRight\", \"ArrowLeft\", \"Space\"].indexOf(keycode) > -1) { ev.preventDefault(); }\n\t});\n\n\t_TEXTBOXES = new Textboxes();\n\n\t_MAP = L.map(\"map\", {\n\t\tcenter: [ 50, 6 ],\n\t\tzoom: window.innerWidth < 575.98 ? 3 : 5,\n\t\tzoomControl: false,\n\t\tmaxZoom: 18,\n\t\tdoubleClickZoom: false,\n\t\tzoomAnimationThreshold: 100,\n\t\twheelPxPerZoomLevel: 1500,\n\t\tkeyboard: false,\n\t\ttap: false,\n\t\tboxZoom: false,\n\t\t//touchZoom: false,\n\t\t//worldCopyJump: true\n\n\t\tcontextmenu: true,\n\t\tcontextmenuItems: [\n\t\t\t{ text: \"Copy coordinates\", callback: ev => { navigator.clipboard.writeText( `${ev.latlng.lat}, ${ev.latlng.lng}` ); } },\n\t\t\t{ text: \"Center map here\", callback: ev => { _MAP.panTo(ev.latlng); } },\n\t\t\t\"-\",\n\t\t\t{ text: \"Zoom in\", icon: \"assets/zoom-in.png\", callback: ev => { _MAP.zoomIn(); } },\n\t\t\t{ text: \"Zoom out\", icon: \"assets/zoom-out.png\", callback: ev => { _MAP.zoomOut(); } }\n\t\t]\n\t});\n\n\tdocument.addEventListener(\"_setup\", ev => { _MAP.setup(); _TEXTBOXES.setup(); _SCENES.setup(); });\n\tdocument.addEventListener(\"_reset\", ev => { _SCENES.reset(); _TEXTBOXES.reset(); _MAP.reset(); });\n\n\n\n\t// Load data\n\t$(\"#loadingModal\").modal(\"show\");\n\t$.ajax({\n\t\ttype: \"GET\",\n\t\turl: \"api.php\",\n\t\tdata: {\n\t\t\t\"op\": \"map_read\",\n\t\t\t\"id\": _ID,\n\t\t\t\"password\": \"\"\n\t\t},\n\t\tdataType: \"json\",\n\t\tsuccess: function(result, status, xhr) {\n\t\t\tif(result.data) { import_data( JSON.parse(result.data) ); }\n\n\t\t\tsetTimeout(function() { $(\"#loadingModal\").modal(\"hide\"); }, 750);\n\t\t},\n\t\terror: function(xhr, status, error) {\n\t\t\tconsole.log(xhr.status, error);\n\n\t\t\tif(xhr.status == 401) { setTimeout(function() { $(\"#loadingModal\").modal(\"hide\"); $(\"#passwordModal\").modal(\"show\"); }, 750); }\n\t\t\telse{ setTimeout(function() { $(\"#loadingModal\").modal(\"hide\"); $(\"#errorModal\").modal(\"show\"); }, 750); }\n\t\t}\n\t});\n\n\t$(\"#passwordModal button#enter\").click(ev => {\n\t\tlet password = $(\"#passwordModal input#passwordInput\").val();\n\t\tpassword = password === \"\" ? password : sjcl.codec.hex.fromBits(sjcl.hash.sha256.hash( password ));\n\t\t_PASSWORD = password;\n\n\t\t$(\"#passwordModal\").modal(\"hide\");\n\t\t$(\"#loadingModal\").modal(\"show\");\n\n\t\t$.ajax({\n\t\t\ttype: \"GET\",\n\t\t\turl: \"api.php\",\n\t\t\tdata: {\n\t\t\t\t\"op\": \"map_read\",\n\t\t\t\t\"id\": _ID,\n\t\t\t\t\"password\": password\n\t\t\t},\n\t\t\tdataType: \"json\",\n\t\t\tsuccess: function(result, status, xhr) {\n\t\t\t\tif(result.data) { import_data( JSON.parse(result.data) ); }\n\n\t\t\t\tsetTimeout(function() { $(\"#loadingModal\").modal(\"hide\"); }, 750);\n\t\t\t},\n\t\t\terror: function(xhr, status, error) {\n\t\t\t\tconsole.log(xhr.status, error);\n\t\t\t\tsetTimeout(function() { $(\"#loadingModal\").modal(\"hide\"); $(\"#errorModal\").modal(\"show\"); }, 750);\n\t\t\t}\n\t\t});\n\t});\n\n};\n"],"names":["$501bc82c97d13554$export$31b40729666a4ae0","a","Math","random","toString","replace","$501bc82c97d13554$export$3b2ba0326b56a54c","data","_OPTIONS","options","scenes","length","_SCENES","store","document","dispatchEvent","Event","importData","_TEXTBOXES","textboxes","_MAP","objects","current","$501bc82c97d13554$export$827cb160439a2d7c","w","h","r","_w","$12b18e89db4cbf5c$export$b4dfb75ee92ddb88","this","active","setup","$","click","ev","prev","next","bind","reset","get","id","i","s","Object","assign","index","getPrevScene","c","getNextScene","off","set","target","setOrientation","pos","css","left","right","resize","setAspectRatio","o","$12b18e89db4cbf5c$var$Scene","bounds","wms","basemap","bookmark","title","append","push","$366a31f5762cebd2$export$1148a9c69cac2f12","sceneId","t","delete","disable","splice","stopPropagation","attr","src","modal","enable","setTimeout","top","ww","window","width","wh","height","mh","th","scrollHeight","isSmall","removeClass","addClass","$366a31f5762cebd2$var$Textbox","locked","dim","content","html","L","Map","addInitHook","fullscreenControl","easyButton","position","states","stateName","icon","onClick","button","map","_IS_MOBILE","parent","postMessage","el","body","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","isFullscreen","state","exitFullscreen","webkitExitFullscreen","msExitFullscreen","addControl","zoomControl","easyBar","zoomIn","isLocked","fitBounds","maxZoom","getMaxZoom","noMoveStart","zoomOut","_BASEMAPS","tiles","addLayer","objectLayer","featureGroup","on","layer","label","bindTooltip","direction","permanent","ImageOverlay","updateTooltip","setIcon","closeTooltip","unbindTooltip","slideCancel","getLayers","_renderer","_reset","include","prop","clearLayers","dragging","scrollWheelZoom","touchZoom","tapHold","_buttons","doubleClickZoom","setPosition","outerWidth","outerHeight","aspectratio","invalidateSize","setFlyTo","flyToBounds","duration","panningspeed","setObjects","os","extractObject","radius","animationspeed","rad","oo","type","object","createObject","oo1","slideTo","setBasemap","setWMS","size","zoom","getZoom","project","getBounds","getCenter","setBounds","unproject","x","y","setUrl","_image","rounded","borderThickness","borderColor","overlayBlur","overlayGrayscale","overlayBrightness","overlayTransparency","getTooltip","d","latLngToContainerPoint","getNorthWest","distanceTo","getSouthWest","offset","openTooltip","getWMS","url","_url","layers","format","version","transparent","source","removeLayer","TileLayer","WMS","tileLayer","minZoom","attribution","bringToFront","getBasemap","img","async","_HOST","Image","decode","b","tlp","brp","p","containerPointToLatLng","lat","lng","p1","imageOverlay","zIndex","presetZoom","bringToBack","resetBasemap","min","max","setZoom","setMinZoom","setMaxZoom","interactive","ratio","angle","blur","brightness","grayscale","transparency","polyline","dashArray","dashed","color","weight","thickness","opacity","polygon","lineColor","lineThickness","lineTransparency","fillColor","fillOpacity","fillTransparency","rectangle","circle","console","error","nw","se","getSouthEast","Polygon","Rectangle","getLatLngs","Polyline","Circle","getLatLng","getRadius","onload","addEventListener","scale","preventDefault","resizeTimer","trigger","clearTimeout","btnTimer","btnToggle","v","keydown","indexOf","code","keyup","keycode","center","innerWidth","zoomAnimationThreshold","wheelPxPerZoomLevel","keyboard","tap","boxZoom","contextmenu","contextmenuItems","text","callback","navigator","clipboard","writeText","latlng","panTo","ajax","op","_ID","password","dataType","success","result","status","xhr","JSON","parse","log","val","sjcl","codec","hex","fromBits","hash","sha256","_PASSWORD"],"version":3,"file":"main.js.map"}